<div class="container">

  <br>
  <h4>Overall Progress</h4>
  <div class="progress">
    <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"
      [style.width]="overallPercent + '%'">{{overallPercent}}%</div>
  </div>
  <br>
  <h4>{{ currentParticipant.name }} Progress</h4>
  <div class="progress">
    <div class="progress-bar progress-bar-striped " [ngClass]="{ 'progress-bar-animated': currentPercent < 100, 'bg-warning': currentPercent > 80 && currentPercent <= 95,'bg-danger': currentPercent > 95 }"
      role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" [style.width]="currentPercent + '%'">{{currentPercent}}%</div>
  </div>


  <h4>Debug info</h4>
  <ul>
    <li>Total {{ overallPercent }}% Complete</li>
    <li>Current {{ currentPercent }}% Complete</li>
    <li>Stats
      <ul>
        <li>Participants Left: {{ participatingParticipants.length }}</li>
        <li>Participants Done: {{ doneParticipants.length }}</li>
        <li>Participants Absent: {{ absentParticipants.length }}</li>
      </ul>
    </li>
    <li>Diff: {{ diff }}</li>
    <li>Elapsed: {{ currentElapsed }}</li>
    <li>Current Participant: {{ currentParticipant.name }} [{{ currentParticipant.init }}]</li>
  </ul>

  <button class="btn btn-sm btn-outline-success" (click)="startTimer()" title="Start Timer" [disabled]="participatingParticipants.length == 0 || timerActive">
    <i class="fa fa-hourglass-start"></i>
  </button>
  <button class="btn btn-sm btn-outline-warning" (click)="resetTimer()" title="Reset">
    <i class="fa fa-undo"></i>
  </button>
  <button class="btn btn-sm btn-outline-primary" (click)="nextParticipant()" [disabled]="participatingParticipants.length <= 1 || !timerActive"
    title="Next participant">
    <i class="fa fa-step-forward"></i> {{ (participatingParticipants.length > 1)?("(" + participatingParticipants[1].init)+")":"" }}
  </button>
  <button class="btn btn-sm btn-outline-danger " (click)="stopTimer()" title="Stop Timer" [disabled]="overallPercent == 0 && currentPercent == 0 || !timerActive">
    <i class="fa fa-hourglass-end"></i>
  </button>

  <hr>
  <h4>Participants
    <button class="btn btn-sm btn-info" (click)="shuffle(participatingParticipants)" title="Shuffle Participants" [disabled]="participatingParticipants.length <= 2">
      <i class="fa fa-random"></i>
    </button>
  </h4>
  <ul class="list-group">
    <li class="list-group-item" *ngFor="let p of participatingParticipants">
      <button class="btn btn-outline-danger btn-sm" (click)="markAbsent(p)" title="Mark as absent" [disabled]="participatingParticipants.length <= 2">
        <i class="fa fa-minus"></i>
      </button> {{ p.name }}</li>
    <li class="list-group-item list-group-item-info" *ngFor="let dp of doneParticipants"> {{ dp.name }} [{{ dp.init }}] - {{ dp.time }}</li>
    <li class="list-group-item list-group-item-danger" *ngFor="let ap of absentParticipants">
      <button class="btn btn-outline-success btn-sm" (click)="markPresent(ap)" title="Mark as present">
        <i class="fa fa-plus"></i>
      </button> {{ ap.init }}</li>
  </ul>

</div>