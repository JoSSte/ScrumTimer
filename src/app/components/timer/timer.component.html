<div class="container" *ngIf="participantList.length > 0 || doneParticipants.length > 0">

  <br>
  <h4>Overall Progress</h4>
  <div class="progress">
    <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"
      [style.width]="totalPercent + '%'">{{totalPercent}}%</div>
  </div>
  <br>
  <h4>{{ currentParticipant.name }} Progress</h4>
  <div class="progress">
    <div class="progress-bar progress-bar-striped " [ngClass]="{ 'progress-bar-animated': currentPercent < 100, 'bg-warning': currentPercent > 80 && currentPercent <= 95,'bg-danger': currentPercent > 95 }"
      role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" [style.width]="currentPercent + '%'">{{currentElapsed | Seconds}}</div>
  </div>
  <br>

  <!--
  <h4>Debug info</h4>
  <ul>
    <li>Total {{ totalPercent }}% Complete</li>
    <li>Current {{ currentPercent }}% Complete</li>
    <li>Stats
      <ul>
        <li>Participants Left: {{ participantList.length }}</li>
        <li>Participants Done: {{ doneParticipants.length }}</li>
        <li>Participants Absent: {{ absentParticipants.length }}</li>
      </ul>
    </li>
    <li>Diff: {{ diff }}</li>
    <li>Elapsed: {{ currentElapsed }}</li>
    <li>Elapsed: {{ totalElapsed }}</li>
    <li>Current Participant: {{ currentParticipant.name }} [{{ currentParticipant.init }}]</li>
  </ul> -->


  <button class="btn btn-outline-success" (click)="startTimer()" title="Start Timer" [disabled]="participantList.length == 0 || timerActive">
    <i class="fa fa-hourglass-start"></i>
  </button>
  <button class="btn btn-outline-secondary" (click)="resetTimer()" title="Reset">
    <i class="fa fa-undo"></i>
  </button>
  <button class="btn btn-outline-primary" (click)="nextParticipant()" [disabled]="participantList.length <= 1 || !timerActive"
    title="Next participant">
    <i class="fa fa-step-forward"></i> {{ (participantList.length > 1)?("(" + participantList[1].init)+")":"" }}
  </button>
  <button class="btn btn-outline-danger " (click)="stopTimer()" title="Stop Timer" [disabled]="totalPercent == 0 && currentPercent == 0 || !timerActive">
    <i class="fa fa-hourglass-end"></i>
  </button>

  <hr>
  <h4>Participants
    <button class="btn btn-sm btn-info" (click)="shuffleParticipants()" title="Shuffle Participants" [disabled]="participantList.length <= 2">
      <i class="fa fa-random"></i>
    </button>
  </h4>
  <ul class="list-group">
    <li class="list-group-item" *ngFor="let p of participantList">
      <button class="btn btn-outline-secondary btn-sm" (click)="markAbsent(p)" title="Mark as absent" [disabled]="participantList.length <= 2">
        <i class="fa fa-minus-circle"></i>
      </button> {{ p.name }}</li>
    <li class="list-group-item list-group-item-info" *ngFor="let dp of doneParticipants"> {{ dp.name }} [{{ dp.init }}] - <span [ngClass]="{'text-danger' : dp.time > individualMaxTime}">{{ dp.time | Seconds }}</span></li>
    <li class="list-group-item list-group-item-danger" *ngFor="let ap of absentParticipants">
      <button class="btn btn-outline-secondary btn-sm" (click)="markPresent(ap)" title="Mark as present">
        <i class="fa fa-plus-circle"></i>
      </button> {{ ap.init }}</li>
  </ul>

</div>
<div class="jumbotron" *ngIf="participantList.length == 0 && doneParticipants.length == 0">
  <p>There are no participants in your list. </p>
  <p>To start using the Scrum Timer, please go to the
    <a href="#" [routerLink]="['participants']">participant list</a> and add some people to the list, either manually or by importing a list from a colleague.</p>
    <p>Note that the Scrum Timer stores participants in local storage. Nothing is sent to the server. This is to provide anonymity and be compliant with corporate policies.</p>
</div>